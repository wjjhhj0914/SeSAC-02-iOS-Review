# DAY 02. iOS Deep Dive: 시스템 구조와 레이아웃 기초

## 1. 개발자의 커뮤니케이션과 기본 환경

* **명확한 기술 용어 사용하기**: 추상적인 표현(그거, 저기 등) 대신 기술적인 명확한 용어로 소통하는 것이 커뮤니케이션을 잘하는 개발자의 특징이다.
* **Xcode General 설정**: 앱의 기본 정보가 담기는 곳으로, 프로젝트 시작 시 가장 먼저 완벽하게 세팅되어야 한다.

## 2. iOS 시스템 아키텍처: 4가지 계층

iOS는 하드웨어와 소프트웨어 사이를 **4개의 층**으로 관리하며, 상위 계층일수록 개발자가 다루기 쉬운 도구(추상화)를 제공한다.

1. **Cocoa Touch(최상단)**: UIKit, Foundation 등 개발자가 화면을 구성하고 로직을 짜는 필수 영역.
2. **Media**: 사진, 영상, 그래픽, 오디오 등 시각적/청각적 리소스를 관리하는 영역.
3. **Core Services**: GPS, 가속도/조도 센서, 화면 회전 감지 등 시스템 기반 서비스를 담당하는 영역.
4. **Core OS(최하단)**: 배터리, 전원, 파일 시스템 등 하드웨어 본연의 기능을 제어하는 영역.

## 3. 이미지 및 리소스 최적화

**① 비트맵(PNG/JPG) vs 벡터(SVG/PDF)**

* **JPG**: 투명도 표현 불가. RGB 정보만 가짐.
* **PNG**: Alpha(투명도) 정보 포함. 애플 환경에 **가장 최적화된** 포맷.
* **Vector**: 확대해도 깨지지 않음. 최근 Xcode에서 지원하지만, 내부적으로는 여전히 1x, 2x, 3x 비트맵으로 변환하여 사용하므로 `Preserve Vector Data` 옵션을 잘 활용해야 함.

**② Rendering Mode(이미지)**

이미지를 원래 색대로 보여줄지(Original), 시스템 색을 입힐지(Template) 결정하는 중요한 설정이다.

* **Original**: 이미지 본래의 색상을 그대로 유지한다.
* **Template**: 이미지의 윤곽선만 따서 시스템 테마 색상을 입힌다. (TabBar에서 주로 사용)

## 4. 다크모드와 컬러 시스템 (iOS 13+)

**① Color Set 활용**

* `Assets`에서 우클릭 후 **Color Set**을 생성하면 라이트모드와 다크모드 각각의 색상을 지정할 수 있다.
* 이렇게 설정한 색상은 시스템 모드가 바뀔 때마다 자동으로 대응된다.

**② System Color vs Fixed Color**

* **System Background Color**: iOS 13 때 다크모드와 함께 등장한 '다이내믹 컬러'이다. 라이트모드에서는 흰색, 다크모드에서는 검은색으로 자동 반전된다.
* **White Color**: 시스템 설정과 무관하게 언제나 흰색으로 고정되는 색상이다.
* **주의점**: 앱의 최소 지원 버전(Deployment Target)이 iOS 13 미만이라면, `System Background Color'가 이전 버전에서 어떻게 표현될지 반드시 확인해야 한다.

**③ Semantic Color(의미론적 색상)**

* 디자이너와 협업할 때 '빨간색(#FF0000)'처럼 고정된 색상값이 아닌 **Primary(주요색)**, **Point(강조색)** 같은 이름을 부여하여 사용해야 한다.
* 커스텀 색상만 고집하면 다크모드 대응 시 색상이 깨질 수 있으므로 의미 중심의 색상 체계를 잡는 것이 중요하다.

## 5. iOS 13: 현대 iOS 프로그래밍의 분기점

iOS 13은 단순히 기능 추가를 넘어 시스템 설계 방식이 크게 바뀐 버전이다.

* **다크모드 등장**: 시스템 전반에 다크모드가 적용되면서 다이내믹 컬러 개념이 필수화되었다.
* **SF Symbols**: 애플이 만든 시스템 아이콘 폰트.
  * **버전 주의**: iOS 13부터 사용 가능하며, 13에서는 보이지만 12 이하 기기에서는 표시되지 않는다.
  * 또한, 최신 버전에서 추가된 아이콘은 그보다 낮은 버전에서는 작동하지 않으므로 [SF Symbols 앱](https://developer.apple.com/sf-symbols/)을 다운받아 지원 버전을 확인해야 한다.
* **iPadOS 및 SceneDelegate**: 아이패드 멀티윈도우 지원을 위해 `AppDelegate`에서 화면 관리 기능이 `SceneDelegate`로 분리되었다.

## 6. UI 가이드라인과 디자인 철학

* **HIG(Human Interface Guidelines)**: 애플의 공식 디자인 가이드라인이다. 지금 당장 달달 외우기보다는 "애플이 권장하는 사용자 경험이 무엇인지" 개념만 알고 실전 코드를 짜며 익히는 것이 효율적이다.

## 4. 컴포넌트 심화 및 실행 원리

**① UIButton Styles(iOS 15 기준)**

* **Default**: 이미지 크기 조절이 비교적 자유롭고, 패딩 대신 텍스트 앞 공백을 활용하기도 한다.
* **Plain**: **iOS 15 이상**의 최신 스타일. 디자인 가이드를 엄격히 따르며 다루기 편리하다.

### 왜 "User Defined Runtime Attributes"를 권장하지 않을까?

우리는 앱을 만드는 과정을 크게 컴파일을 포함한 **빌드**와 **런타임**으로 나눈다.

**② Compile vs Build vs Runtime**

* **Compile**: 컴퓨터가 이해하는 언어로 번역하는 과정이다. (가장 중요)
* **Build**: 컴파일을 포함해 실행 가능한 파일로 만드는 전체 과정이다.
* **Runtime**: 사용자가 실제 앱을 조작하는 순간이다.

`User Defined Runtime Attributes`는 런타임에 속성을 결정하므로 가급적 컴파일 단계에서 속성을 고정하는 것이 성능상 유리하다.

## 5. UIViewController 계층 구조: 모든 화면의 시작

iOS의 모든 화면은 `UIViewController`로부터 시작된다. 이 기능을 상속받아 특수한 목적을 가진 컨트롤러들이 존재한다.

### Container View Controller (그릇 역할)

자체적으로 콘텐츠를 보여주기보다, 다른 뷰 컨트롤러들을 담고 관리하는 특별한 컨트롤러다. 이들은 이름에 'View'가 없는데, 이는 실제 화면보다 '관리'에 집중하기 때문이다.

* **UINavigation Controller**: 수직적(Drill-down) 화면 관리. 하위 항목으로 깊게 들어가는 구조.
  * **계층 구조**: `Root View Controller` → `Child View Controller` 순서로 쌓인다.
* **UITabBar Controller**: 수평적 화면 관리. 서로 다른 카테고리를 자유롭게 오감.
  * **구조 팁**: 보통 탭 바 아래에 네비게이션 컨트롤러를 붙여서 카테고리를 이동한 후 그 안에서 깊게 탐색하게 설계한다.

## 6. 레이아웃의 기초: 오토 레이아웃 (Auto Layout)

화면상의 위치와 크기를 절대값이 아닌 '수식(제약 조건, Constraints)'으로 설정하여 모든 기기에 대응한다.

* **Intrinsic Content Size(본질적 크기)**
  * **UITextField/UIButton 등**: 애플이 정한 표준 가독성과 터치 영역 때문에 본질적 크기를 가진다.
  * **UIImageView**: 이미지마다 크기가 다르므로 본질적 크기가 모호하며, 반드시 **높이와 너비**를 명확히 설정해야 레이아웃 오류가 나지 않는다.
* **주의사항**: 레이아웃 설정 후 스토리보드에서 마우스로 객체를 움직이면 충돌이 발생할 수 있으니 inspector창을 활용해야 한다.
